(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var a=new(t.bind.apply(t,r));return n&&i(a,n.prototype),a}(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,t)},r(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}var c=function(n){function r(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,n,r){return n=a(n),function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(e,o()?Reflect.construct(n,r||[],a(e).constructor):n.apply(e,r))}(this,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(r,n),c=r,(l=[{key:"connectedCallback",value:function(){this.render()}},{key:"render",value:function(){this.innerHTML=' \n        <section class="row g-0 mb-4 rounded-2 " style="border: 1px solid rgba(146, 155, 163, 0.50);">\n            '.concat(this.getTemplate(),"\n        </section>\n        ")}},{key:"getTemplate",value:function(){return""}},{key:"disconnectedCallback",value:function(){this.innerHTML=""}}])&&e(c.prototype,l),Object.defineProperty(c,"prototype",{writable:!1}),c;var c,l}(r(HTMLElement));function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},p.apply(null,arguments)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}var y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=d(e),function(t,e){if(e&&("object"==l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,n||[],d(t).constructor):e.apply(t,n))}(this,e)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){var t,n,r;(t=e,n=this,"function"==typeof(r=p(d(1&3?t.prototype:t),"connectedCallback",n))?function(t){return r.apply(n,t)}:r)([]),this.addEventListeners()}},{key:"addEventListeners",value:function(){this.querySelector("#calculate-btn").addEventListener("click",this.onClickCalculate.bind(this))}},{key:"getTemplate",value:function(){return'\n        <div class="container p-4">\n        <h3 class="text-start text-primary">Your plan</h3>\n            <div class="row g-3">\n                <div class="col-12 col-md-6">\n                    <label for="start-capital" class="form-label">Starting Amount</label>\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="start-capital" aria-describedby="start-capital-addon">\n                        <span class="input-group-text" id="start-capital-addon"><i class="bi bi-bank2"></i></span>\n                    </div>\n                </div>\n                <div class="col-12 col-md-6">\n                    <label for="increment" class="form-label">Monthly savings contribution</label>\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="increment" aria-describedby="increment-addon">\n                        <span class="input-group-text" id="increment-addon"><i class="bi bi-cash-coin"></i></span>\n                    </div>\n                </div>\n                <div class="col-12 col-md-6">\n                    <label for="period" class="form-label">Investment horizon in years</label>\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="period" aria-describedby="period-addon">\n                        <span class="input-group-text" id="period-addon"><i class="bi bi-hourglass-split"></i></span>\n                    </div>\n                </div>\n                <div class="col-12 col-md-6">\n                    <label for="rate" class="form-label">Rate of Return</label>\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="rate" aria-describedby="rate-addon">\n                        <span class="input-group-text" id="rate-addon"><i class="bi bi-percent"></i></span>\n                    </div>\n                </div>\n                <div class="col-12 col-md-6">\n                    <label for="annual-costs" class="form-label">Annual Costs</label>\n                    <div class="input-group">\n                        <input type="text" class="form-control" id="annual-costs" aria-describedby="annual-costs-addon">\n                        <span class="input-group-text" id="annual-costs-addon"><i class="bi bi-percent"></i></span>\n                    </div>\n                </div>\n\n                <div class="col-12 d-flex justify-content-md-start justify-content-center mt-3">\n                    <button class="btn btn-primary" id="calculate-btn">CALCULATE</button>\n                </div>\n            </div>\n        </div>    \n        '}},{key:"onClickCalculate",value:function(){var t=this.getFormValues(),e=new CustomEvent("calculate",{detail:t,bubbles:!0});this.dispatchEvent(e)}},{key:"getFormValues",value:function(){return{startCapital:this.querySelector("#start-capital").value,monthlyContribution:this.querySelector("#increment").value,investmentYears:this.querySelector("#period").value,rateOfReturn:this.querySelector("#rate").value,annualCosts:this.querySelector("#annual-costs").value}}}],r&&u(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(c);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=w(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},g.apply(null,arguments)}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function O(t,e,n){return(e=j(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}var S=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),O(t=function(t,e,n){return e=w(e),function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}(this,e),"charts",[]),O(t,"startingAmountColor","#487ffe"),O(t,"contributionColor","#ff6384"),O(t,"gainColor","#ffce56"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){var t,n,r;(t=e,n=this,"function"==typeof(r=g(w(1&3?t.prototype:t),"connectedCallback",n))?function(t){return r.apply(n,t)}:r)([])}},{key:"attributeChangedCallback",value:function(t,e,n){var r=this;if("data"===t&&n)try{this.data=JSON.parse(n),this.lastData=this.data.slice(-1)[0],this.lastData&&(this.baseCapital=Number(this.lastData.baseCapital).toFixed(2),this.totalContributions=(Number(this.lastData.endCapitals)-Number(this.baseCapital)-Number(this.lastData.gainFromStart)).toFixed(2),this.totInvestedCap=(Number(this.lastData.baseCapital)+Number(this.totalContributions)).toFixed(2),this.totGain=Number(this.lastData.gainFromStart).toFixed(2),this.totalEndCap=Number(this.lastData.endCapitals).toFixed(2),this.createInfoBox()),setTimeout((function(){return r.updateCharts()}),0)}catch(t){console.error("Error parsing data:",t)}}},{key:"getTemplate",value:function(){return'\n        <section class="text-primary">\n        <h3 class="p-4">Results</h3>\n            <div class="row ">\n                <div class=" col-12 col-md-7 mb-sm-4">\n                    <canvas id="timeChart"></canvas>\n                </div>\n                <div class="col-12 col-md-5">\n                    \n                    <canvas id="pieChart"></canvas>  \n                </div>\n                <div id="info-box"></div>\n            </div>\n        </section>\n        '}},{key:"updateCharts",value:function(){var t=this.querySelector("#timeChart"),e=this.querySelector("#pieChart");this.charts.length>0&&this.charts.forEach((function(t){return t.destroy()})),this.createBarChart(t),this.createPieChart(e)}},{key:"createInfoBox",value:function(){var t=this.querySelector("#info-box");t&&(t.innerHTML='\n        <ul class="list-group list-group-flush d-flex flex-column gap-2 p-4">\n          <li class="list-group-item row d-flex flex-row justify-content-between ">\n              <div class="col-6 text-start">Starting capital:</div>  \n              <div class="col-6 text-center">'.concat(this.baseCapital,'</div>\n          </li>\n          <li class="list-group-item row d-flex flex-row justify-content-between ">\n              <div class="col-6 text-start">Contributions:</div>  \n              <div class="col-6 text-center">').concat(this.totalContributions,'</div>\n          </li>\n          <li class="list-group-item row d-flex flex-row justify-content-between ">\n              <div class="col-6 text-start">Total gain:</div>  \n              <div class="col-6 text-center">').concat(this.totGain,'</div>\n          </li>\n          <li class="list-group-item row d-flex flex-row justify-content-between ">\n              <div class="col-6 text-start">Total invested capital:</div>  \n              <div class="col-6 text-center">').concat(this.totInvestedCap,'</div>\n          </li>\n          <li class="list-group-item row d-flex flex-row justify-content-between ">\n              <div class="col-6 text-start">End of period capital:</div>  \n              <div class="col-6 text-center">').concat(this.totalEndCap,"</div>\n          </li>\n      </ul>\n\n        "))}},{key:"createPieChart",value:function(t){this.charts.push(new Chart(t,{type:"doughnut",data:{labels:["Starting Capital","Contribution","Tot Gain"],datasets:[{label:"Value",data:[this.baseCapital,this.totalContributions,this.totGain],backgroundColor:[this.startingAmountColor,this.contributionColor,this.gainColor]}]},options:{responsive:!0}}))}},{key:"createBarChart",value:function(t){this.charts.push(new Chart(t,{type:"bar",data:{labels:this.data.map((function(t){return t.year})),datasets:[{label:"Starting Amount",data:this.data.map((function(t){return t.baseCapital})),borderWidth:1,backgroundColor:this.startingAmountColor,stack:"stack1"},{label:"Contributions",data:this.data.map((function(t){return t.endCapitals-t.baseCapital-t.gainFromStart})),borderWidth:1,backgroundColor:this.contributionColor,stack:"stack1"},{label:"Total interest",data:this.data.map((function(t){return t.gainFromStart})),borderWidth:1,backgroundColor:this.gainColor,stack:"stack1"}]},options:{responsive:!0,maintainAspectRatio:!0,scales:{x:{stacked:!0},y:{beginAtZero:!0,stacked:!0}}}}))}}],r&&h(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(c);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P(r.key),r)}}function P(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}function E(t){var e="function"==typeof Map?new Map:void 0;return E=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(T())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&_(o,n.prototype),o}(t,arguments,R(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_(n,t)},E(t)}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(T=function(){return!!t})()}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}O(S,"observedAttributes",["data"]);var F=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=R(e),function(t,e){if(e&&("object"==x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,T()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}(this,e)).values=t.getDefaultValues(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){this.render(),this.addEventListeners()}},{key:"addEventListeners",value:function(){var t=this;this.addEventListener("calculate",(function(e){t.handleCalculate(e.detail)}))}},{key:"getDefaultValues",value:function(){return[{year:(new Date).getFullYear()+1,baseCapital:1e4,endCapitals:11e3,contribution:5e3,gainFromStart:800}]}},{key:"handleCalculate",value:function(t){this.values=[];for(var e=(new Date).getFullYear(),n=Number(t.investmentYears),r=Number(t.startCapital),o=Number(t.rateOfReturn)/100,i=12*Number(t.monthlyContribution),a=r,c=0;c<n;c++)a=a*(1+o)+i*((Math.pow(1+o,1)-1)/o),this.values.push({year:e+c+1,baseCapital:r,endCapitals:a.toFixed(2),contribution:i,gainFromStart:0==c?(a-r-i).toFixed(2):(a-r-i*(c+1)).toFixed(2)});this.reloadCharts()}},{key:"reloadCharts",value:function(){var t=this.querySelector("graph-component");t&&t.setAttribute("data",JSON.stringify(this.values))}},{key:"render",value:function(){this.innerHTML="\n            <form-component></form-component>\n            <graph-component data='".concat(JSON.stringify(this.values),"'></graph-component>\n        ")}}],r&&k(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(E(HTMLElement));customElements.define("main-component",F),customElements.define("form-component",y),customElements.define("graph-component",S)})();